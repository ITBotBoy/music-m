(this["webpackJsonpreact-music"]=this["webpackJsonpreact-music"]||[]).push([[3,7],{242:function(n,t,e){"use strict";e(0);var i=e(11),a=(e(243),e(1));t.a=Object(i.g)((function(n){var t=void 0===(e=n.title)?"\u6b4c\u5355":e,e=n.history;n=n.isMarquee;return Object(a.jsxs)("nav",{className:"mm-nav",children:[Object(a.jsx)("div",{className:"mm-nav-left",onClick:e.goBack}),n?Object(a.jsx)("marquee",{children:Object(a.jsx)("div",{className:"mm-nav-title",children:t})}):Object(a.jsx)("div",{className:"mm-nav-title",children:t}),Object(a.jsx)("div",{className:"mm-nav-right"})]})}))},243:function(n,t,e){},244:function(n,t,e){"use strict";e.d(t,"b",(function(){return i})),e.d(t,"a",(function(){return a}));var i=function(n){return 9<n/1e4?1e4<n/1e4?"".concat((n/1e8).toFixed(1),"\u4ebf"):"".concat(Math.ceil(n/1e4),"\u4e07"):Math.floor(n)},a=function(n,t){return n.findIndex((function(n){return n.id===t.id}))}},247:function(n,t,e){"use strict";var i=e(0),a=e(244),o=(i=e(248),e.n(i)),r=e(1);t.a=function(n){var t=n.list,e=n.onItemClick;return Object(r.jsx)("div",{className:[o.a.columnWrapper,"column-wrapper"].join(" "),children:0<t.length&&t.map((function(n){return Object(r.jsxs)("div",{className:[o.a["column-item"],"column-item"].join(" "),onClick:function(){return e(n.id)},children:[Object(r.jsx)("div",{className:o.a["column-img"],"data-play":Object(a.b)(n.playCount),children:Object(r.jsx)("img",{width:"100%",height:"100%",src:"".concat(n.coverImgUrl,"?param=200y200"),alt:""})}),Object(r.jsx)("p",{className:o.a["column-title"],children:n.name.replace(/\s/g," ")})]},n.id)}))})}},248:function(n,t,e){n.exports={columnWrapper:"columnList_columnWrapper__3uAjL","column-item":"columnList_column-item__3Cq0r","column-img":"columnList_column-img__zQtu1","column-title":"columnList_column-title__3TmDo"}},249:function(n,t,e){"use strict";var i=e(3),a=e(0),o=e.n(a),r=e(4),c=e(5),s=(e(2),e(1)),l=r.a.div(Object(i.a)(["\n  .icon_wrapper{\n    position: fixed;\n    z-index: 1000;\n    margin-top: -10px;\n    margin-left: -10px;\n      color: var(--THEME);\n    font-size: 14px;\n    display: none;\n    transition: transform 1s cubic-bezier(.62,-0.1,.86,.57);\n    transform: translate3d(0, 0, 0);\n    >div{\n      transition: transform 1s;\n    }\n  }\n"]));t.a=o.a.memo(Object(a.forwardRef)((function(n,t){var e=Object(a.useRef)(),i=Object(c.h)("transform");function o(n){for(var t=n.x,a=n.y,o=0;o<10&&"break"!==function(n){var o=[].slice.call(e.current.children)[n];if(!1===o.running)return o.style.left=t+"px",o.style.top=a+"px",o.style.display="inline-block",setTimeout((function(){o.running=!0,o.style[i]="translate3d(0, 750px, 0)",o.querySelector("div").style[i]="translate3d(-40px, 0, 0)"}),20),"break"}(o);o++);}return Object(a.useEffect)((function(){for(var n,t=0;t<10;t++){var i=(void 0,n="<div class='icon_wrapper'>".concat(i='<div class="iconfont">&#xe642;</div>',"</div>"),(i=document.createElement("div")).innerHTML=n,i.firstChild);e.current.appendChild(i)}[].slice.call(e.current.children).forEach((function(n){n.running=!1,n.addEventListener("transitionend",(function(){this.style.display="none",this.style.transform="translate3d(0, 0, 0)",this.running=!1,this.querySelector("div").style.transform="translate3d(0, 0, 0)"}),!1)}))}),[]),Object(a.useImperativeHandle)(t,(function(){return{startAnimation:o}})),Object(s.jsx)(l,{ref:e})})))},250:function(n,t,e){"use strict";e.r(t),e.d(t,"Context",(function(){return C}));var i=e(10),a=e(0),o=e.n(a),r=e(3),c=e(4),s=e(2),l=c.a.div(Object(r.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  z-index: 100;\n  overflow: hidden;\n  //background: #f2f3f4;\n  background: #fff;\n  transform-origin: right bottom;\n  &.fly-enter, &.fly-appear{\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\n  }\n  &.fly-enter-active, &.fly-appear-active{\n    transition: transform .3s;\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\n  }\n  &.fly-exit{\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\n  }\n  &.fly-exit-active{\n    transition: transform .3s;\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\n  }\n"])),d=(c.a.div(Object(r.a)(["\n  background-size: 100%;\n  padding: 5px 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  box-sizing: border-box;\n  width: 100%;\n  height: 200px;\n  position: relative;\n  z-index: 100;\n  .background{\n    /* z-index: -1; */\n    background: url(",") left top no-repeat;\n\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    filter: blur(20px);\n    transform: scale(1.5);\n  }\n  .img_wrapper{\n    width: 120px;\n    height: 120px;\n    position: relative;         \n    .decorate {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 35px;\n      border-radius: 3px;\n      background: linear-gradient(hsla(0,0%,43%,.4),hsla(0,0%,100%,0));\n    }\n    .play_count {\n      position: absolute;\n      right: 2px;\n      top: 2px;\n      font-size: ",";\n      line-height: 15px;\n      color: ",";\n      .play{\n        vertical-align: top;\n      }\n    }\n    img{\n      width: 120px;\n      height: 120px;\n      border-radius:3px;\n    }\n  }\n  .desc_wrapper {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    height: 120px;\n    padding: 0 10px;\n    .title{\n      max-height: 70px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: ",";\n      font-weight: 700;\n      line-height: 1.5;\n      font-size: ",";\n    }\n    .person{\n      display: flex;\n      .avatar{\n        width: 20px;\n        height: 20px;\n        margin-right: 5px;\n        img{\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n        }\n      }\n      .name {\n        line-height: 20px;\n        font-size: ",";\n        color: ",";\n      }\n    }\n  }\n"]),(function(n){return n.background}),s.a["font-size-s"],s.a["font-color-light"],s.a["font-color-desc"],s.a["font-size-l"],s.a["font-size-m"],s.a["font-color-desc"]),c.a.div(Object(r.a)(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  box-sizing: border-box;\n  margin: 0 30px;\n  margin-top: -20px;\n  margin-bottom: 10px;\n  >div {\n    display: flex;\n    flex-direction: column;\n    line-height: 20px;\n    text-align: center;\n    font-size: ",";\n    color: #3b1f1f;\n    color: ",";\n    z-index:1000;\n    font-weight: 500;\n    .iconfont {\n      font-size: 20px;\n    }\n  }\n"]),s.a["font-size-s"],s.a["font-color-desc"]),c.a.div(Object(r.a)(["\n  border-radius: 10px;\n  opacity: 0.98;\n  .first_line{\n    box-sizing: border-box;\n    padding: 10px 0;\n    margin-left: 10px;\n    position: relative;\n    justify-content: space-between;\n    border-bottom: 1px solid ",";\n    .play_all{\n      display: inline-block;\n      line-height: 24px;\n      color: ",";\n      .iconfont {\n        font-size: 24px;\n        margin-right: 10px;\n        vertical-align: top;\n      }\n      .sum{\n        font-size: ",";\n        color: ",";\n      }\n      >span{\n        vertical-align: top;\n      }\n    }\n    .add_list {\n      display: flex;\n      align-items: center;\n      position: absolute;\n      right: 0; top :0px; bottom: 0;\n      width: 130px;\n      line-height: 34px;\n      background: ",";\n      color: ",";\n      font-size: 0;\n      border-radius: 3px;\n      vertical-align: top;\n      .iconfont {\n        vertical-align: top;\n        font-size: 10px;\n        margin: 0 5px 0 10px;\n      }\n      span{\n        font-size: 14px;\n        line-height: 34px;\n      }\n  }\n}\n"]),s.a["border-color"],s.a["font-color-desc"],s.a["font-size-s"],s.a["font-color-desc-v2"],s.a["theme-color"],s.a["font-color-light"]),c.a.ul(Object(r.a)(["\n  >li{\n    display: flex;\n    height: 60px;\n    align-items: center;  \n    .index{\n      width: 60px;\n      height: 60px;\n      line-height: 60px;\n      text-align: center;\n    }\n   \n    .info{\n      box-sizing: border-box;\n      flex: 1;\n      display: flex;\n      height: 100%;\n      padding: 5px 0;\n      flex-direction: column;\n      justify-content: space-around;\n      border-bottom: 1px solid ",";\n      >span:first-child{\n        color: ",";\n      }\n      >span:last-child{\n        font-size: ",";\n        color: #bba8a8;\n      }\n    }\n    \n  }\n"]),s.a["border-color"],s.a["font-color-desc"],s.a["font-size-s"]),c.a.div(Object(r.a)(["\n  position: fixed;\n  left: 0; right: 0; top: 0; bottom: 0;\n  width: 100px;\n  height: 100px;\n  margin: auto;\n"])),e(241)),u=e(38),p=e(22),h=e(75),f=e(72),b=e(242),x=e(1),g=c.a.div(Object(r.a)(["\n    .mm-nav {\n        position: ",";\n        z-index: 3;\n        width:100%;\n        background:",";\n    }\n"]),(function(n){return n.loading?"relative":"fixed"}),(function(n){return n.isMarquee||n.loading?"var(--THEME)":"transparent"})),m=o.a.forwardRef((function(n,t){var e=n.title,i=n.isMarquee;n=n.loading;return Object(x.jsx)(g,{ref:t,isMarquee:i,loading:n?1:0,children:Object(x.jsx)(b.a,{title:e,isMarquee:i})})}));m.defaultProps={handleClick:function(){},title:"\u6807\u9898",isMarquee:!1};var j=o.a.memo(m),v=c.a.div(Object(r.a)(["\n    position: relative;\n   .topWrapper {\n       background-size: 100%;\n      padding: 0 20px;\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      box-sizing: border-box;\n      width: 100%;\n      height: 200px;\n      position: relative;\n   }\n  .background{\n    z-index: -1;\n    background: url(",") left top no-repeat;\n    background: contain;\n    background-position: 0 0;\n    background-size: 100% 100%;\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    filter: blur(20px);\n    .filter{\n      position: absolute;\n      z-index: 10;\n      top: 0; left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(7, 17, 27, 0.2);\n    }\n  }\n  .img_wrapper{\n    width: 120px;\n    height: 120px;\n    position: relative;         \n    .decorate {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 35px;\n      border-radius: 3px;\n      background: linear-gradient(hsla(0,0%,43%,.4),hsla(0,0%,100%,0));\n    }\n    .play_count {\n      position: absolute;\n      right: 2px;\n      top: 2px;\n      font-size: ",";\n      line-height: 15px;\n      color: ",";\n      .play{\n        vertical-align: top;\n      }\n    }\n    img{\n      width: 120px;\n      height: 120px;\n      border-radius:3px;\n    }\n  }\n  .desc_wrapper {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    height: 120px;\n    padding: 0 10px;\n    .title{\n      max-height: 70px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: ",";\n      font-weight: 700;\n      line-height: 1.5;\n      font-size: ",";\n    }\n    .person{\n      display: flex;\n      .avatar{\n        width: 20px;\n        height: 20px;\n        margin-right: 5px;\n        img{\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n        }\n      }\n      .name {\n        line-height: 20px;\n        font-size: ",";\n        color: ",";\n      }\n    }\n  }\n"]),(function(n){return n.background}),s.a["font-size-s"],s.a["font-color-light"],s.a["font-color-light"],s.a["font-size-l"],s.a["font-size-m"],s.a["font-color-desc-v2"]),O=c.a.div(Object(r.a)(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  box-sizing: border-box;\n  padding: 0 30px 20px 30px;\n  >div {\n    display: flex;\n    flex-direction: column;\n    line-height: 20px;\n    text-align: center;\n    font-size: ",";\n    color: #3b1f1f;\n    color: ",";\n    z-index:1000;\n    font-weight: 500;\n    .iconfont {\n      font-size: 20px;\n    }\n  }\n"]),s.a["font-size-s"],s.a["font-color-light"]),y=e(251);e(252);var w=o.a.memo((function(n){var t=n.currentAlbum,e=n.pullUpLoading,i=(n.id,function(){return Object(x.jsxs)(O,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("i",{className:"icon icon-pinglun"}),"\u8bc4\u8bba"]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("i",{className:"icon icon-xihuan1"}),"\u70b9\u8d5e"]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("i",{className:"icon icon-tianjia"}),"\u6536\u85cf"]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("i",{className:"icon icon-youcecaidan"}),"\u66f4\u591a"]})]})});return Object(x.jsxs)("div",{children:[Object(x.jsxs)(v,{background:t.coverImgUrl,children:[Object(x.jsx)("div",{className:"background",children:Object(x.jsx)("div",{className:"filter"})}),Object(x.jsxs)("div",{className:"topWrapper",children:[Object(x.jsxs)("div",{className:"img_wrapper",children:[Object(x.jsx)("div",{className:"decorate"}),Object(x.jsx)("img",{src:t.coverImgUrl,alt:""}),Object(x.jsxs)("div",{className:"play_count",children:[Object(x.jsx)("i",{className:"icon play icon-headset"}),Object(x.jsxs)("span",{className:"count",children:[Math.floor(t.subscribedCount/1e3)/10,"\u4e07"]})]})]}),Object(x.jsxs)("div",{className:"desc_wrapper",children:[Object(x.jsx)("h1",{className:"title",children:t.name}),Object(x.jsxs)("div",{className:"person",children:[Object(x.jsx)("div",{className:"avatar",children:Object(x.jsx)("img",{src:t.creator.avatarUrl,alt:""})}),Object(x.jsx)("div",{className:"name",children:t.creator.nickname})]})]})]}),n.showMenu&&i()]}),Object(x.jsx)(y.a,{songs:t.tracks,collectCount:t.subscribedCount,showCollect:!1,loading:e,musicAnimation:n.musicAnimation,showBackground:!0})]})})),k=e(6),z=e(249),N=e(5),C=Object(a.createContext)(void 0);t.default=Object(p.b)((function(n){return{currentAlbum:n.getIn(["album","currentAlbum"]),pullUpLoading:n.getIn(["album","pullUpLoading"]),enterLoading:n.getIn(["album","enterLoading"]),startIndex:n.getIn(["album","startIndex"]),totalCount:n.getIn(["album","totalCount"])}}),(function(n){return{getAlbumDataDispatch:function(t){n(Object(h.a)(!0)),n(Object(h.c)(t))},changePullUpLoadingStateDispatch:function(t){n(Object(h.b)(t))}}}))(o.a.memo((function(n){var t=Object(a.useState)(!0),e=(O=Object(i.a)(t,2))[0],o=O[1],r=Object(a.useState)("\u6b4c\u5355"),c=(y=Object(i.a)(r,2))[0],s=y[1],p=Object(a.useState)(!1),h=Object(i.a)(p,2),b=(t=h[0],h[1]),g=Object(a.useRef)(),m=Object(a.useRef)(),v=n.match.params.id,O=n.currentAlbum,y=(r=n.enterLoading,n.pullUpLoading),L=(p=n.songsCount,n.getAlbumDataDispatch),_=n.changePullUpLoadingStateDispatch,S=O.toJS();return Object(a.useEffect)((function(){L(v)}),[L,v]),h=Object(a.useCallback)((function(n){var t=-k.a,e=Math.abs(n.y/t),i=m.current;n.y<t?(i.style.opacity=Math.min(1,(e-1)/2),s(S&&S.name),b(!0)):(i.style.opacity=1,s("\u6b4c\u5355"),b(!1))}),[S]),O=Object(a.useCallback)((function(){o(!1)}),[]),Object(x.jsx)(d.a,{in:e,timeout:300,appear:!0,unmountOnExit:!0,onExited:n.history.goBack,children:Object(x.jsxs)(l,{play:p,children:[Object(x.jsx)(j,{ref:m,loading:r,title:c,handleClick:O,isMarquee:t}),r||Object(N.g)(S)?null:Object(x.jsx)(u.a,{onScroll:h,pullUp:function(){_(!0),_(!1)},pullUpLoading:y,bounceTop:!0,children:Object(x.jsx)(C.Provider,{value:v,children:Object(x.jsx)(w,{showMenu:!1,currentAlbum:S,pullUpLoading:y,musicAnimation:function(n,t){g.current.startAnimation({x:n,y:t})}})})}),r?Object(x.jsx)(f.a,{}):null,Object(x.jsx)(z.a,{ref:g})]})})})))},251:function(n,t,e){"use strict";var i=e(10),a=e(0),o=e.n(a),r=e(3),c=e(4),s=e(2),l=c.a.div(Object(r.a)(["\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  opacity: 0.98;\n  ",";\n  .first_line{\n    box-sizing: border-box;\n    padding: 10px 0;\n    margin-left: 10px;\n    position: relative;\n    justify-content: space-between;\n    border-bottom: 1px solid ",";\n    .play_all{\n      display: inline-block;\n      line-height: 24px;\n      color: ",";\n      .iconfont {\n        font-size: 24px;\n        margin-right: 10px;\n        vertical-align: top;\n      }\n      .sum{\n        font-size: ",";\n        color: ",";\n      }\n      >span{\n        vertical-align: top;\n      }\n    }\n    .add_list,.isCollected {\n      display: flex;\n      align-items: center;\n      position: absolute;\n      right: 0; top :0; bottom: 0;\n      width: 130px;\n      line-height: 34px;\n      background: ",";\n      color: ",";\n      font-size: 0;\n      border-radius: 3px;\n      vertical-align: top;\n      .iconfont {\n        vertical-align: top;\n        font-size: 10px;\n        margin: 0 5px 0 10px;\n      }\n      span{\n        font-size: 14px;\n        line-height: 34px;\n      }\n    }\n    .isCollected{\n      display: flex;\n      background: ",";\n      color: ",";\n    }\n}\n"]),(function(n){return n.showBackground?"background: ".concat(s.a["highlight-background-color"]):""}),s.a["border-color"],s.a["font-color-desc"],s.a["font-size-s"],s.a["font-color-desc-v2"],s.a["theme-color"],s.a["font-color-light"],s.a["background-color"],s.a["font-color-desc"]),d=c.a.ul(Object(r.a)(["\n  >li{\n    display: flex;\n    height: 54px;\n    align-items: center;\n    &:last-child {\n        .info {\n        border: none!important;\n        }\n    }  \n    &.songError{\n        * {\n        color: #bbbbbb!important;\n        }\n    }\n    &.songActive {\n        * {\n        color: var(--THEME)!important;\n        }\n    }\n    .index{\n        font-size:",";\n    color:",";\n      flex-basis: 60px;\n      width: 60px;\n      height: 54px;\n      line-height: 54px;\n      text-align: center;\n    }\n    .info{\n      box-sizing: border-box;\n      flex: 1;\n      display: flex;\n      height: 100%;\n      padding: 4px 0;\n      flex-direction: column;\n      justify-content: space-around;\n      border-bottom: 1px solid ",";\n      ","\n      >span{\n        ","\n      }\n      >span:first-child{\n        font-size:",";\n        color: ",";\n      }\n      >span:last-child{\n        font-size: ",";\n        color:",";\n      }\n    }\n  }\n"]),s.a["font-size-m"],s.a["list-main-color"],s.a["border-color"],s.a.noWrap(),s.a.noWrap(),s.a["font-size-m"],s.a["list-main-color"],s.a["font-size-s"],s.a["list-light-color"]),u=e(5),p=e(6),h=(r=e(71),e.n(r)),f=(r=e(22),e(9)),b=e(250),x=e(1);e=o.a.forwardRef((function(n,t){var e,o=Object(a.useState)(0),r=(v=Object(i.a)(o,2))[0],c=v[1],s=n.songs,f=n.collectCount,g=n.showCollect,m=void 0!==(w=n.loading)&&w,j=n.usePageSplit,v=(o=n.currentSong,n.errorList),O=n.musicAnimation,y=n.changePlayListDispatch,w=n.fakeId,k=n.changeCurrentIndexDispatch,z=n.changeSequecePlayListDispatch,N=n.changeErrorListDispatch,C=Object(a.useContext)(b.Context)||w,L=s.length,_=Object.keys(v.toJS())[0],S=Object.values(v.toJS())[0]||[],I=o.toJS().id;function q(n,t,e){S.includes(e)&&_==C||(y(s),z(s),k(t),N(C),O(n.nativeEvent.clientX,n.nativeEvent.clientY))}return Object(a.useEffect)((function(){m&&(r+1+p.b>=L||c(r+p.b))}),[m,r,L]),Object(x.jsxs)(l,{ref:t,showBackground:n.showBackground,children:[Object(x.jsxs)("div",{className:"first_line",children:[Object(x.jsxs)("div",{className:"play_all",onClick:function(n){return q(n,0)},children:[Object(x.jsx)("i",{className:"iconfont",children:"\ue6e3"}),Object(x.jsxs)("span",{children:["\u64ad\u653e\u5168\u90e8 ",Object(x.jsxs)("span",{className:"sum",children:["(\u5171",L,"\u9996)"]})]})]}),g?(e=f,Object(x.jsxs)("div",{className:"add_list",children:[Object(x.jsx)("i",{className:"iconfont",children:"\ue62d"}),Object(x.jsxs)("span",{children:["\u6536\u85cf(",Math.floor(e/1e3)/10,"\u4e07)"]})]})):null]}),Object(x.jsx)(d,{children:function(n){for(var t=[],e=j?r+p.b:n.length,i=0;i<e&&"break"!==function(e){if(e>=n.length)return"break";var i=n[e];t.push(Object(x.jsxs)("li",{className:h()({songActive:_==C&&I==i.id,songError:_==C&&S.includes(i.id)}),onClick:function(n){return q(n,e,i.id)},children:[Object(x.jsx)("span",{className:"index",children:e+1}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("span",{children:i.name}),Object(x.jsxs)("span",{children:[(i.ar,Object(u.d)(i))," - ",(i.al||i.album).name]})]})]},i.id))}(i);i++);return t}(s)})]})}));t.a=Object(r.b)((function(n){return{fullScreen:n.getIn(["player","fullScreen"]),playing:n.getIn(["player","playing"]),errorList:n.getIn(["player","errorList"]),currentIndex:n.getIn(["player","currentIndex"]),currentSong:n.getIn(["player","currentSong"]),scrollY:n.getIn(["album","scrollY"])}}),(function(n){return{changePlayListDispatch:function(t){n(Object(f.e)(t))},changeCurrentIndexDispatch:function(t){n(Object(f.a)(t))},changeErrorListDispatch:function(t){n(Object(f.c)(t))},changeSequecePlayListDispatch:function(t){n(Object(f.h)(t))}}}))(o.a.memo(e))},252:function(n,t,e){},256:function(n,t,e){},257:function(n,t,e){},258:function(n,t,e){},265:function(n,t,e){"use strict";e.r(t);var i=e(19),a=e(36),o=e(70),r=e(69),c=e(0),s=e(11),l=e(71),d=e.n(l),u=e(22),p=e(251),h=e(244),f=(e(256),e(1)),b=e(72),x=e(64),g=e(77);var m=e(35);var j=e(73),v=e(25),O=(e(106),e(113),e(38)),y=(e(257),e(249)),w=(e(250),e(9)),k=e(247),z=(l=function(n){Object(o.a)(e,n);var t=Object(r.a)(e);function e(n){var a;return Object(i.a)(this,e),(a=t.call(this,n)).addPlay=function(n,t){Object(j.b)(n).then((function(n){var e;n.data.code===v.a&&((e=a.state.songs[t]).image=n.data.songs[0].al.picUrl,a.props.addPlay(e))}))},a.openPlayList=function(n){a.props.history.push({pathname:"".concat(router_prefix,"/playlist/").concat(n)})},a.toggleTab=function(n){0===a.state.songs.length||0===a.state.playlists.length?a.setState({loading:!0,type:n}):a.setState({type:n})},a.search=function(n,t){Object(j.f)(n,t).then((function(n){n.data.code===v.a&&setTimeout((function(){switch(t){case 1:return void a.setState({loading:!1,songs:n.data.result.songs});case 1e3:return void a.setState({loading:!1,playlists:n.data.result.playlists})}}),300)}))},a.musicNoteRef=Object(c.createRef)(),a.state={tabData:[{title:"\u5355\u66f2",type:1},{title:"\u6b4c\u5355",type:1e3}],type:1,songs:[],playlists:[],loading:!0},a}return Object(a.a)(e,[{key:"componentDidMount",value:function(){}},{key:"musicAnimation",value:function(n,t){this.startAnimation({x:n,y:t})}},{key:"componentWillReceiveProps",value:function(n){n.query!==this.props.query&&(this.setState({songs:[],playlists:[],loading:!0}),this.search(n.query,this.state.type))}},{key:"shouldComponentUpdate",value:function(n,t){return n.query&&t.type!==this.state.type&&this.search(n.query,t.type),!0}},{key:"render",value:function(){var n=this,t=(r=(this.props.currentMusic,this.state)).tabData,e=r.type,i=r.songs,a=r.playlists,o=r.loading,r=this.props.query;return Object(f.jsxs)("div",{className:d()("search-list",{"mm-none":!r}),children:[Object(f.jsx)("ul",{className:"search-list-tab",children:t.map((function(t){return Object(f.jsx)("li",{className:d()("search-tab-item",{active:e===t.type}),onClick:function(){return n.toggleTab(t.type)},children:Object(f.jsx)("span",{children:t.title})},t.type)}))}),Object(f.jsxs)("div",{className:"search-list-content",children:[Object(f.jsxs)("div",{className:d()("search-content-item",{active:1===e}),children:[o?Object(f.jsx)(b.a,{}):0<i.length&&Object(f.jsx)(O.a,{children:Object(f.jsx)(p.a,{fakeId:(new Date).getTime(),songs:i,collectCount:0,showCollect:!1,pullUpLoading:!1,musicAnimation:this.musicAnimation.bind(this.musicNoteRef.current),showBackground:!1})}),Object(f.jsx)(y.a,{ref:this.musicNoteRef})]}),Object(f.jsx)("div",{className:d()("search-content-item",{active:1e3===e}),children:o?Object(f.jsx)(b.a,{}):0<a.length&&Object(f.jsx)(O.a,{children:Object(f.jsx)(k.a,{list:a,onItemClick:function(t){return n.props.history.push("".concat(router_prefix,"/playlist/").concat(t))}})})})]})]})}}]),e}(c.Component),Object(u.b)((function(n){return{currentMusic:n.currentMusic,playList:n.playList}}),(function(n){return{addPlay:function(t){var e;n((e=t,function(n,t){var i=function(n){return function(n){if(Array.isArray(n))return Object(x.a)(n)}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||Object(g.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t().playList);-1<(t=Object(h.a)(i,e))||(t=i.push(e)-1,n(function(n){return{type:m.c,playList:n}}(i))),n(function(n){return{type:m.a,currentIndex:n}}(t)),n(function(n){return{type:m.b,currentMusic:n}}(i[t])),n(function(n){return{type:m.d,showPlayer:n}}(!0))}))},reloadErrorList:function(){n(Object(w.c)((new Date).getTime()))}}}))(Object(s.g)(l)));e(258),e=function(n){Object(o.a)(e,n);var t=Object(r.a)(e);function e(n){var a;return Object(i.a)(this,e),(a=t.call(this,n)).searchChange=function(n){a.setState({value:n.target.value})},a.onEnter=function(n){13===n.keyCode&&a.setState({query:n.target.value})},a.state={value:"",query:"",type:1,hots:[]},Object(j.g)().then((function(n){n.data.code===v.a&&a.setState({hots:n.data.result.hots})})),a}return Object(a.a)(e,[{key:"render",value:function(){var n=this,t=(a=this.state).value,e=a.query,i=a.hots,a=this.props.history;return Object(f.jsxs)("div",{className:"mm-wrapper search",children:[Object(f.jsxs)("nav",{className:"search-head",children:[Object(f.jsx)("div",{className:"search-head-left",onClick:a.goBack}),Object(f.jsx)("div",{className:"search-head-box",children:Object(f.jsx)("input",{className:"search-head-input",type:"text",placeholder:"\u641c\u7d22\u4f60\u559c\u6b22\u7684",value:t,autoFocus:"autofocus",onChange:this.searchChange,onKeyDown:this.onEnter})})]}),Object(f.jsxs)("div",{className:"mm-wrapper",children:[Object(f.jsx)(z,{query:e}),Object(f.jsxs)("div",{className:d()("search-hots",{"mm-none":e}),children:[Object(f.jsx)("h1",{children:"\u70ed\u95e8\u641c\u7d22"}),Object(f.jsx)("ul",{children:0<i.length&&i.map((function(t,e){return Object(f.jsx)("li",{className:"search-hots-item",onClick:function(){n.setState({query:t.first,value:t.first})},children:t.first},e)}))})]})]})]})}}]),e}(c.Component);t.default=Object(s.g)(e)}}]);